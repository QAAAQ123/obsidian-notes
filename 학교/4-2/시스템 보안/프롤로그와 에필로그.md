### Call
- push %eip
- jmp '다음함수 주소'

##  **문법 스타일 요약**
Ch4의 문법: src,des

| 항목      | Intel               | AT&T                      |
| ------- | ------------------- | ------------------------- |
| 피연산자 순서 | dest, src           | src, dest                 |
| 레지스터    | eax                 | %eax                      |
| 즉시값     | 10                  | $10                       |
| 메모리     | [eax+4]             | 4(%eax)                   |
| 명령어 크기  | 없음                  | movl, movb 등              |
| 사용 환경   | MASM, NASM, Windows | GAS(GNU Assembler), Linux |
- 프롤로그: push ebp -> mov esp to ebp
- 에필로그: mov ebp to esp -> pop ebp -> pop eip
## 프롤로그
1. push ebp
    1. 이전 함수의 EBP값 스택에 PUSH
    2. ESP-4 or ESP-8이 자동으로
2. mov ebp, esp
    1. ebp ← esp
    2. 현재 esp값을 ebp로 copy하여 현재 함수의 ebp 설정(과거함수의 ebp가 현재함수의 ebp로 설정됨)
3. sub esp, N
    1. 프롤로그에 포함되어 있지 않음
    2. esp를 N byte만큼 빼서 지역 변수 공간을 확보한다

### 프롤로그 이후의 스택
1. call을 통해 저장된 리턴 주소
2. push ebp를 통해 저장된 이전 함수의 ebp
    1. 이전 함수의 ebp를 가리키는 포인터의 주소가 현재 ebp의 주소가 된다

## 에필로그
1. mov esp, ebp
    1. esp ← ebp
    2. 현재 함수의 ebp로 esp를 되돌린다
    3. 지역변수 공간 해제
2. pop ebp
    1. esp에 현재 함수의 ebp를 저장
    2. esp-4를 하여 리턴주소를 가리킨다
        1. ebp값 한 칸 위에는 프롤로그 이전에 call을 통해 저장해둔 이전 함수로 돌아갈 주소가 저장되어 있다
3. pop eip
    1. 이전 함수로 돌아가는 리턴 주소를 eip에 저장
4. jmp eip
    1. 이전 함수의 리턴 주소로 되돌아감

---

프롤로그
1. push ebp: 과거 함수의 ebp를 스택에 저장
2. mov ebp,esp: 현재 함수의 ebp를 설정하는 것이며, 이 ebp는 스택에 저장된 과거 함수의 ebp를 기준으로 지역 변수와 매개변수를 참조하는 기준점이 된다

에필로그
1. mov esp,ebp: esp의 값을 과거함수의 ebp값으로 변경한다
2. pop ebp: 과거 함수의 ebp값을 pop하여 esp가 과거 함수의 ebp값을 가리키게 하여, 과거 ebp로 되돌린다
3. pop eip: 리턴 주소를 eip에 넣어 과거함수로 돌아갈 준비를 한다
4. jmp eip: eip에들어있는 리턴 명령을 실행하여 과거 함수로 돌아간다(과거 함수에서 끝난 부분 다음)

🧠 프롤로그
1. `push ebp` → 이전 함수의 ebp를 스택에 저장
2. `mov ebp, esp` → 현재 함수의 ebp 설정 (현재 esp 위치를 기준점으로 삼음)

🧠 에필로그
1. `mov esp, ebp` → 지역 변수 공간 해제 (esp를 프레임 시작점으로 복원)
2. `pop ebp` → 이전 함수의 ebp 복원
3. `ret` → 리턴 주소 pop → eip에 저장 → 그 주소로 점프 (이전 함수로 복귀)

## 프롤로그 이전
1. 다음 함수로 올 인자를 push
2. call함
3. 프롤로그 시작