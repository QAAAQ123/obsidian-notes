### 1. 프로젝트 개요

- 프로젝트 목적 및 배경
	- 백엔드 연습을 위한 게시판 프로젝트
- 주요 기능 및 요구사항
	- 게시판의 기능 구현
		- **Spring Boot + JPA +Spring Web,MVC + MySQL ...**
		- 글,댓글 CURD
		- 글에 이미지,음성,동영상 삽입 가능
		- 검색 기능
	- 회원 기능 구현
		- **Spring Security + 세션 인증**
		- 로그인
		- 로그아웃
		- 회원가입
	- 글 및 댓글 검색 기능
	- 최종 배포까지 구현
- 프로젝트 일정 및 마일스톤
	- 2025/07/18~
	- 처음 시도해보는 것들이 많아서 얼마나 걸릴지 예상 불가

### 2. 시스템 아키텍처 설계

- 전체 시스템 구조도![[전체시스템 구조도.png]]
- 패키지 구조 및 모듈 분리
	- Controller/DTO/Entity/Repository/Service 패키지로 분리

### 3. 데이터베이스 설계

- ERD(Entity Relationship Diagram) 작성![[게시판 ERD IE 표기.drawio.png]]
> post에 post_title 추가
- 테이블 스키마 설계
	- post(post_id(PK),post_title,post_content,post_time,user_id)
	- user(user_id(PK),user_password,user_time)
	- comment(comment_id(PK),comment_content,comment_time,post_id(FK),user_id(FK))
	- media(media_id(PK),media_type,media_content,post_id(FK))
- 인덱스 및 제약조건 설정
	- 인덱스: PK 설정시 자동 생성되는 인덱스 사용
	- 제약조건: 유저가 삭제되어도 글,댓글이 남아있도록 해야함
		- 개체 무결성 제약조건-NOT NULL,UNIQUE
		- 참조 무결성 제약조건-user_id만 NULL 허용
- 데이터 타입 및 길이 정의
	- post(post_id:BIGINT,post_title:VARCHAR(255),post_content: TEXT(255),post_time:DATETIME,user_id:BIGINT)
	- user(user_id:VARCHAR(255),user_password:VARCHAR(255),user_time:DATETIME)
	- comment(comment_id:VARCHAR(255),comment_content: TEXT,comment_time:DATETIME,post_id:BIGINT,user_id:BIGINT)
	- media(media_id:BIGINT,media_type:CHAR,media_content: BLOB(아마도),post_id:BIGINT)

### 4. 엔티티 및 JPA 설정

- 엔티티 클래스 설계
	1. Post
		1. post_id(PK):@Id,@GeneratedValue.Identity,name=postId
		2. post_content: name=postContent,@Lob
		3. post_title: name=postTitle
		4. post_time: LocalDateTime 타입 name=postTime
		5. user_id(FK): ~={red}@ManyToOne=~,@JoinColumn=user_id
	2. Comment
		1. comment_id(PK):@Id,@GeneratedValue.Identity,name=commentId
		2. comment_content: name=commentContent
		3. comment_time: @Temproal,name=commentTime
		4. post_id(FK): ~={red}@ManyToOne=~,@JoinColumn=post_id
		5. user_id(FK): ~={red}@ManyToOne=~,@JoinColumn=user_id
	3. User:
		1. user_id(PK): @Id,name=username + ~={red}spring security 설정=~
		2. user_password: name=password + ~={red}spring security 설정=~
		3. user_time: @Temproal,name=userTime
	4. Media:
		1. media_id(PK): @Id,@GeneratedValue.Identity,name=mediaId
		2. media_type: name=mediaType
		3. media_content:~={red}@Lob=~,name=mediaContent
		4. post_id(FK): ~={red}@ManyToOne=~,@JoinColumn=post_id
- JPA 설정 및 영속성 컨텍스트 관리
	- JPA 설정
		- 의존성:(Gradle),Spring Data JPA,MySQL Driver
		- 데이터 소스: MySQL연결
		- Hibernate 설정: spring.jpa.show-sql=true,spring.jpa.hibernate.ddl-auto=create,spring.jpa.properties.hibernate.format_sql=true
		- Repository: 개별 repository마다 JpaRepository impelemts
	- 영속성 컨텍스트 관리
		- @Transactoinal사용
		- 나머지는 안배워서 모르겠음
		- 로딩 전략: 프로젝트 하면서 결정
	- 쿼리 최적화 방안:???


### 5. API 설계
![[게시판 프로젝트 API 설계 엑셀.png]]
- 페이징 처리 - 한 페이지에 글 10개

### 6. 보안 및 인증

- 권한 관리 (Role-based Access Control):guest,user,admin
- Spring Security 설정(권한 별 경로)
	- guest: /posts-get,/login/,/join,/joinProc
	- user: /posts-get,post,/posts/{postId},/posts/{postId}/comments,/posts/{postId}/comments/{commentId},/logout,/findsomething
	- admin:/posts/{postId}-put,/posts/{postId}/comments/{commentsId}-put,/login,/join을 제외한 모든 경로 접근 가능
- 폼 로그인 방법 사용
- csrf 사용
- BCryptPasswordEncoder 사용

### 7. 예외 처리 및 로깅

- 글로벌 예외 처리기
	- @RestControlerAdvice 사용
		1. 서버에서 리소스를 찾을 수 없을 때
		2. 클라이언트에서 들어온 JSON이 DB,Persistence context 데이터 형식에 맞지 않은 경우
		3. 인터넷 연결 에러
		4. 그 외 상황 전체 에러 처리
- 커스텀 예외 처리기
	- 엔드포인트 권한과 맞지 않을 때(guest로 댓글 작성 요청)
- 로깅 전략 (Logback, SLF4J)-http요청 및 응답만 로그 남김

모르겠음
### 8. 테스트 계획
### 9. 배포 및 운영
### 10. 성능 최적화
### 11. 문서화