## 초본
![[게시판API문서_1(AI 수정 전).xlsx]]


## 초본 AI 질문
먼저 업로드된 API 명세서를 분석해보겠습니다.

현재 API 명세서를 분석한 결과, 프로젝트 요구사항과 비교했을 때 몇 가지 중요한 수정사항이 필요합니다. 각 항목별로 왜 수정해야 하는지 자세히 설명해드리겠습니다.

### 1. 엔드포인트 구조의 일관성 문제

**현재 문제점:**

- 비로그인 상태: `/posts` (GET)
- 로그인 상태: `/userId/posts` (GET, POST)

**수정이 필요한 이유:** RESTful API에서는 리소스 중심의 일관된 URL 구조를 사용해야 합니다. 현재 구조는 같은 리소스인데도 로그인 여부에 따라 다른 경로를 사용하고 있어 혼란을 야기합니다. 인증은 HTTP 헤더(Authorization)로 처리하고, 엔드포인트는 일관되게 `/posts`로 통일하는 것이 더 적절합니다.

**권장 수정안:**

- 모든 게시글 관련 API를 `/posts`로 통일
- 사용자별 게시글 조회는 쿼리 파라미터 사용: `/posts?userId=123`

### 2. 게시글 생성 시 요청 데이터 구조 문제

**현재 문제점:** 요청 파라미터가 "postId,postDto,mediaDto"로 분리되어 있습니다.

**수정이 필요한 이유:** 앞서 논의했듯이, 조건1("post 안에만 media 작성 가능")에 따라 media는 post에 종속적입니다. 또한 게시글 생성 시 postId는 서버에서 자동 생성되어야 하므로 클라이언트에서 전송하면 안 됩니다.

**권장 수정안:**

```json
{
  "title": "게시글 제목",
  "content": "게시글 내용",
  "media": [
    {
      "type": "image",
      "url": "image.jpg",
      "caption": "설명"
    }
  ]
}
```

### 3. 댓글 생성 엔드포인트의 RESTful 위반

**현재 문제점:** 댓글 생성이 `/userId/posts/postId`로 되어 있어 POST 리소스와 혼동됩니다.

**수정이 필요한 이유:** RESTful 원칙에 따르면, 댓글은 독립적인 리소스로 취급되어야 합니다. 현재 구조로는 게시글 생성과 댓글 생성의 엔드포인트가 동일해서 구분할 수 없습니다.

**권장 수정안:**

- 댓글 생성: `POST /posts/{postId}/comments`
- 댓글 수정: `PUT /posts/{postId}/comments/{commentId}`
- 댓글 삭제: `DELETE /posts/{postId}/comments/{commentId}`

### 4. 인증 정보 처리 방식 문제

**현재 문제점:** 사용자 ID가 URL 경로에 포함되어 있습니다.

**수정이 필요한 이유:** 보안상 문제가 있을 뿐만 아니라, 다른 사용자의 ID를 임의로 넣어서 요청할 수 있는 위험이 있습니다. 인증된 사용자 정보는 JWT 토큰이나 세션을 통해 서버에서 자동으로 파악해야 합니다.

**권장 수정안:**

- 인증 헤더 사용: `Authorization: Bearer {token}`
- URL에서 사용자 ID 제거

### 5. 응답 데이터 구조의 일관성 부족

**현재 문제점:** 응답 구조가 각 API마다 다르고, 표준적인 형태를 따르지 않습니다.

**수정이 필요한 이유:** 클라이언트에서 일관된 방식으로 응답을 처리할 수 있도록, 표준적인 응답 구조를 사용해야 합니다. 또한 에러 처리나 메타 정보도 포함될 수 있도록 구조화해야 합니다.

**권장 수정안:**

```json
{
  "success": true,
  "data": {
    "id": 1,
    "title": "게시글 제목",
    "content": "내용",
    "media": [...],
    "comments": [...]
  },
  "message": "성공적으로 조회되었습니다"
}
```


### 6. 누락된 기능들

**현재 누락된 항목들:**

- 로그아웃 API가 없습니다
- 에러 응답 코드와 구조가 정의되지 않았습니다
- 페이징 처리가 없습니다

**추가가 필요한 이유:** 실제 서비스에서는 이러한 기능들이 반드시 필요하며, API 문서에서 미리 정의해두어야 개발 과정에서 혼란을 방지할 수 있습니다.

이러한 수정사항들은 단순히 기술적인 완성도를 높이는 것뿐만 아니라, 실제 사용자 경험과 보안, 그리고 유지보수성을 크게 개선할 수 있습니다. 각 수정사항을 하나씩 적용해나가면서 더 견고한 API 설계를 만들어 나가시면 좋겠습니다.







## 초본 수정 후
![[게시판API문서_3(SpringSecurity 강의 후).xlsx]]