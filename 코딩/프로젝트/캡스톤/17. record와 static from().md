#record #staticFrom
## Record
- java 14부터 도입한 데이터를 담기 위한 특수 클래스
- 역할: 오직 데이터를 나르는 일
- 특징
	- immutable: 수정 불가
	- 보일러플레이트 제거: getter,toString,equals,hashCode,생성자를 알아서 만들어줌

## static from()
- 정적 팩토리 메서드: Entity(원본 데이터)를 넣으면 Record로 포장해서 뱉어주는 함수
- static인 이유
	- from은 도구이다
	- 매번 new Converter()로 도구 객체를 생성할 필요가 없기 때문에

### static from 메모리 동작
`예시: ChatSessionResponse.SummaryDto.from(session)`
1. `from(session)`을 호출하면, Stack에 from을 위한 stack frame이 생김
2. from 내부에서 `return new SummaryDto(session.getId()....)`를 실행함
	1. 실제 데이터인 record는 Heap에 있고, 코드는 Method Area에 있음
3. from이 끝나면 Stack frame을 삭제하고, Heap에 만들어진 실제 DTO데이터는 GC가 수거해감

### 동작 정리
1. from() 메서드를 실행하면 stack에 이 from을 위한 stack frame이 생긴다.
2. 이 stack frame은 필요한 값들을 Heap에서 참조하고 있다.
3. from() 메서드가 return new Object()를 한다
4. 실제 instance Object는 Heap에 생긴다
5. from() 이 사라지기 직전에 instance Obejct객체의 주소를 호출한 곳(Service 메서드)로 던져준다
6. from()을 위한 stack frame은 사라진다.
7. instance Object가 역할을 다하면 GC가 수거해간다.
```plaintext
[ Method Area (공유 영역, Static) ]
-------------------------------------------------------
|  Class: SummaryDto (설계도)                         |
|  Method: static from() { ...코드... }               |  <-- 코드는 여기에 딱 1개만 존재
-------------------------------------------------------
         ⬇️ (호출!)
         
[ Stack (임시 작업대) ]
-------------------------------------------------------
|  from(session) 실행 중...                           |  <-- 호출될 때만 잠깐 생김
|  변수: session 참조값                               |
-------------------------------------------------------
         ⬇️ (new SummaryDto 생성!)
         
[ Heap (데이터 저장소) ]
-------------------------------------------------------
|  [Instance] SummaryDto (id="A", title="hi")         |  <-- 실제 데이터는 여기에!
|  [Instance] ChatSession (Entity)                    |
-------------------------------------------------------
```