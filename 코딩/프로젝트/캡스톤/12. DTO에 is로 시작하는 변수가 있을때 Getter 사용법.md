#JsonProperty
## 변수 isPrivacyAgreed가 privacyAgreed로 변하는 이유
- JavaBeans 규약: "boolean 타입의 getter는 `get` 대신 `is`로 시작해야 한다."
1. 롬복이 isPrivacyAgreed의 getter로 isPrivacyAgreed()를 만듦
2. Jackson이 getter인 isPrivacyAgreed()를 보고 변수의 이름을 privacyAgreed로 잘못된 예측을 함
3. Jackson이 json 키값을 isPrivacyAgreed 아닌 privacyAgreed라고 생각함
4. 백엔드에서 privacyAgreed가 오길 기대하지만 실제로는 isPrivacyAgreed가 와서 무시함
5. 따라서 @JsonProperty로 Key값을 명시해줘야함



방금 언급했던 **1번(Boolean 필드명과 JSON 매핑 문제)**이 왜 발생하는지, 그리고 왜 `@JsonProperty`가 안전한 해결책인지 자세히 설명해 드릴게요.

핵심은 **"자바 라이브러리(Jackson)가 `is`로 시작하는 변수를 멋대로 해석해서 이름을 바꿔버리기 때문"**입니다.

---

### **1. 사건의 발단: Lombok과 Jackson의 동상이몽**

자바에는 JavaBeans 규약이라는 오래된 규칙이 있습니다.

"boolean 타입의 getter는 get 대신 is로 시작해야 한다."

#### **상황 A: Lombok의 행동**

개발자가 필드명을 `isPrivacy...`라고 지으면, 롬복은 "어? 이미 `is`가 있네?" 하고 똑똑하게 판단해서 **Getter 이름을 그대로 `isPrivacy...()`로 만듭니다.** (isIsPrivacy... 라고 안 만듦)

Java

```
// User Code
private boolean isPrivacyAgreed;

// Lombok Generate
public boolean isPrivacyAgreed() { return this.isPrivacyAgreed; }
```

#### **상황 B: Jackson(JSON 변환기)의 행동**

스프링부트가 JSON 데이터를 자바 객체로 바꿀 때 쓰는 **Jackson** 라이브러리는 Getter 메서드 이름을 보고 JSON 키값을 추측합니다.

1. Getter 이름을 본다: `isPrivacyAgreed()`
    
2. JavaBeans 규약을 따른다: "boolean getter가 `is`로 시작하네? **그럼 변수명은 `is`를 뺀 뒤쪽이겠구나!**"
    
3. **결론:** "이 필드의 JSON 키값은 **`privacyAgreed`**야."
    

---

### **2. 발생하는 문제 (프론트엔드와의 불일치)**

이 해석 차이 때문에 **프론트엔드 개발자와 백엔드 개발자 사이에 오해**가 생깁니다.

- **프론트엔드:** "변수명이 `isPrivacyAgreed`니까 이렇게 보내면 되겠지?"
    
    JSON
    
    ```
    {
      "isPrivacyAgreed": true  <-- 프론트가 보낸 데이터
    }
    ```
    
- **백엔드(Spring/Jackson):** "나는 **`privacyAgreed`**라는 키를 기다리고 있는데, `isPrivacyAgreed`가 왔네? 이건 모르는 데이터니 무시하자."
    
    - 결과: DTO의 `isPrivacyAgreed` 필드는 기본값인 **`false`**로 남게 됨.
        
    - 최종 에러: **`@AssertTrue` 검증 실패** (사용자는 동의했는데 서버는 동의 안 했다고 에러 뱉음)
        

---

### **3. 해결책: `@JsonProperty`로 이름 고정하기**

`@JsonProperty`는 Jackson에게 **"추측하지 말고, 무조건 내가 지정한 이름을 써!"**라고 명령하는 어노테이션입니다.

Java

```
// DTO 클래스
public class TermsAgreementDto {
    
    @JsonProperty("isPrivacyPolicyAgreed") // <--- "이 이름 그대로 써!"
    @AssertTrue(...)
    private boolean isPrivacyPolicyAgreed; 
}
```

이렇게 붙여두면:

1. Jackson이 Getter 이름을 보고 `privacyPolicyAgreed`로 바꾸려다가,
    
2. `@JsonProperty`를 보고 "아, 알겠어. 그냥 `isPrivacyPolicyAgreed`로 매핑할게." 하고 따르게 됩니다.
    

### **요약**

`boolean` 변수명이 `is`로 시작할 때는 **`@JsonProperty`를 붙여주는 것이 프론트엔드와의 통신 에러를 막는 가장 안전한 보험**입니다.