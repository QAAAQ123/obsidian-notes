JPA의 값 타입은 크게 3가지로 나눈다
- 기본 값 타입
- 임베디드 타입(복합 값 타입)
- 컬렉션 값 타입

## 기본값 타입
- 자바가 제공하는 기본 데이터 타입(int,double,래퍼 클래스,String 등)
- 값 타입은 식별자 값도 생명주기도 없다,엔티티에 의존한다
- 값 타입은 공유 할 수 없다

## 임베디드 타입(복합 값 타입)
- 사용자 정의 값 타입
- ~={red} **★★★임베디드 타입도 값 타입이다★★★**=~
- 객체 지향성과 응집력을 위해 사용한다
- @Embeddedable: 값 타입을 정의하는 곳에 표시
- @Embedded: 값 타입을 사용하는 곳에 표시
- ~={red}기본 생성자가 필수이다=~
- 임베디드 타입과 값 타입은 엔티티의 생명주기에 의존한다. 따라서 엔티티와 임베디드 값 타입의 관계를 UML로 표현하면 컴포지션 관계가 된다라고 말한다
- 임베디드 타입에 정의한 매핑 정보를 재정의하려면 엔티티에 @AttributeOverride를 사용하면 된다
- 임베디드 타입에 null을 넣으면 매핑한 속성 값은 모두 null이 된다.
```java
@Embeddedable
public class Address{
	@Column(name = city)
	private String city;
	private String street;
	private String zipcode;
	...
}
```

## 값 타입과 불변 객체
- 값 타입은 절대 여러 엔티티에서 공유하여 사용하면 안된다.이런 것을 공유 참조라고 한다. 
- 공유 참조로 발생하는 버그는 정말 찾아내기 어렵다
- 따라서 ~={red}값 타입은 ★★★인스턴스를 복사★★★해서 사용해야 한다=~
- 하지만 값 타입을 다루는 객체 타입은 공유를 피할 수 없다.**객체를 공유하게 되면 자연스럽게 값 타입도 공유**되기 때문에,객체의 공유를 피하기 위해서 ~={red}불변 객체로 설계=~해야 한다(immutable Object)

### ★불변 객체★
- 한 번 만들면 절대 변경할 수 없는 객체
- 조회 가능,수정 불가
- 가장 간단한 방법: 생성자로만 값 설정하고 수정자를 만들지 않으면 된다.(setter를 만들지 않으면 된다.)


## 값 타입의 비교
- 동일성 비교: 인스턴스의 참조 값을 비교, `==사용`
- 동등성 비교: 인스턴스의 값을 비교,`equals() 사용`
- 값 타입의 equals() 메소드를 재정의 할 때는 보통 ~={red}모든 필드의 값을 비교=~하도록 구현한다
- equals()를 재정의 하면 hashCode()도 재정의 하는 것이 안전하다


## 값 타입 컬렉션
- ~={red}한개의 엔티티에 하나 이상의 임베디드 값 타입을 저장 =~
- @ElementCollection과 @CollectionTable 어노테이션을 붙혀야 한다.
  ex) 멤버(id(FK),주소(임베디드),좋아하는음식들(임베디드))
- 값 타입 컬렉션(@ElementCollection)의 기본 fetch 전략은 LAZY이다
- 값 타입 컬렉션은 영속성 전이,고아 객체 제거 기능을 필수로 가진다
- 값 타입 컬렉션의 값을 변경하면 식별자가 없기 때문에 DB의 원본 데이터를 찾기 어렵다. 이런 문제로 인해 ~={red}값 타입 컬렉션에 변경사항이 발행하면 매핑된 모든 테이블을 삭제하고 다시 매핑하는 전략을 사용=~한다.
- 값 타입 컬렉션이 매핑된 테이블에 데이터가 많다면 값 타입 컬렉션 대신에 일대다 관계를 고려해야 한다.


## 정리
### 엔티티 타입의 특징
- 식별자가 있다
	- 식별로 엔티티 구분 가능하다
- 생명 주기가 있다
	- 생성,영속화,소멸 하는 생명주기가 있다
- 공유 할 수 있다
	- 참조 값을 공유 할 수 있다

### 값 타입의 특징
- 식별자가 없다
- 생명 주기를 엔티티에 의존한다
- 공유하지 않는 것이 안전하다
	- 값을 복사해서 사용하는 것이 안전하다
	- 오직 하나의 주인만이 관리해야 한다
	- immutable객체로 만드는 것이 안전하다



- 임베디드 값 타입
	- @Embeddable로 임베디드 값 타입 생성
	- ==임베디드 타입으로만 이루어진 테이블을 만들지 않음==
	- @Embedded로 엔티티 안에 들어갈 때만 엔티티 안에서 속성으로 사용된다.
- 컬렉션 값 타입
	- 기본 값 타입이나 임베디드 값 타입을 한 엔티티에서 1개 이상 사용할때 
	- 컬렉션 값 타입만의 별도 테이블이 생긴다
	- ==컬렉션 값 타입으로 만든 테이블과 엔티티로 만든 테이블을 외래키로 연결한다==