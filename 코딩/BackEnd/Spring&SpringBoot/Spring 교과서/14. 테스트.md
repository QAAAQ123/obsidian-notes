### 테스트 범주
1. 단위 테스트: 격리된 로직에 집중
2. 통합 테스트: 여러 구성 요소가 서로 올바르게 상호 작용하는지 검증하는 데 집중

### 테스트 코드를 작성해야 하는 이유
1. 앱이 지속적으로 올바르게 작동하는지 검증
2. 테스트 단계를 읽으면서 사용 사례 목적을 쉽게 이해(문서화 역할)
3. 개발 과정의 새로운 애플리케이션 문제에 대한 피드백 제공

회귀 테스트: 기존 기능을 지속적으로 테스트하여 여전히 올바르게 작동하는지 확인하는 방법
### 지속적 통합(CI)
- CI(Continuous Intergration): 개발자가 변경할 때마다 빌드 프로세스를 실행하는 방식
- 젠킨스나 팀시티와 같은 CI 도구는 코드가 변경되면 테스트를 실행하고 테스트 실패시 개발자에게 알려준다

## 테스트 구현

각 테스트 시나로오에 대해 앱이 어떻게 동작해야 하는지 이해하고, 요구에 작동하는지 검증하게 테스트 코드를 작성해야 함
메서드를 작게 유지해야 하는 이유: 테스트 시나리오 이해를 쉽게 하기 위해서

### 모든 테스트의 구성요소
1. 가정(준비,given)
	1. 입력 정의/제어해야할 의존성 찾기
	2. 어떤 입력을 제공해야 하는가/기대하는 방식으로 작동하려면 의존성을 어떻게 해야하는가
2. 호출/실행(행동,when)
	1. 테스트 대상 로직을 호출하여 동작 검증
3. 유효성 검사(단언,then)
	1. 수행해야 하는 모든 유효성 검사 정의
	2. 해당 로직이 주어진 조건에서 호출되면 어떤 일이 발생되는지에 답할 수 있어야 한다.

## 단위 테스트 
단위 테스트는 한 가지 흐름에만 집중하고, 여러 흐름에 대한 테스트를 만들어야 한다.
ex) 송금: 1.송신인 계좌 잔액 부족/2.송금 성공/3.수신인 계좌번호 없음 등...

1. 단위 테스트는 동작을 검증하기 위해 특정 사례를 가정하는 메서드
2. 사용 사례가 실행되는 조건 정의/앱 요구사항으로 정의된 동작 검증
3. 모든 의존성을 제거하여 격리된 특정 로직만 테스트
4. 정상/오류 흐름 작성

### 단위 테스트 작성 단계
1. 가정 정의: 테스트할 메서드를 호출하기 전에 메서드가 의존하는 입력 값 정함
2. 테스트할 메서드 호출: 가정 단계에서 정한 입력 값을 사용하여 테스트할 메서드 호출
3. 유효성 검사: 테스트할 메서드가 예상대로 실행되는지 검증하고 가정에 주어진 입력을 사용하여 테스트가 수행해야 하는 모든 검사를 작성한다.

#### ★★~={red}가정 단계에서 작성해야 하는 의존성(given단계에서 작성해야 하는 것)=~★★
1. 테스트 메소드의 매개변수
2. 메소드가 사용하지만 테스트 할 메소드로 생성 할 수 없는 인스턴스

#### 가짜 객체
단위 테스트는 한 부분의 로직에만 초점을 맞추기 때문에 실제 인스턴스의 메소드를 호출해서는 안된다. 
따라서 가짜 객체인 모의(mock) 객체를 사용하여 테스트의 흐름을 유도한다.
즉,테스트의 의존성은 실제 인스턴스가 아닌 가짜 인스턴스를 사용하여 테스트 할 메소드의 흐름을 만든다.

#### 예외 플로 작성
예외를 만났을때 기대한 방식으로 실행되는지 확인하기 위해 예외 Flow에 대한 테스트 코드도 작성해야 한다. 
예외 플로의 Then단계에서는 assertThat대신에 **assertThrows()**를 사용한다.

#### 반환값 테스트
`assertEquals()`로 테스트 한다
`assertEquals(예상한 반환값,테스트에서 생성한 반환값)`


## 통합 테스트
컴포넌트 두 개 이상이 상호 작용하는 방식에 중점

통합 테스트 예시
1. 앱 내의 객체 여러개 간의 통합
2. 프레임워크 버전 변경 문제 발견
3. 앱과 DB의 통합

### 단위 테스트와의 차이점
- 격리된 로직을 테스트 하지 않기 때문에, 의존성을 모의하지 않고 실제 인스턴스 의존성을 주입 받아 테스트 할 수 있다. (어떤 목적으로 통합 테스트를 하느냐에 따라 다르다)

### ~={red}`@MockBean`의 사용=~
- `@MockBean`은 스프링 부트에서 사용하는 어노테이션이다. 
- ★★★**~={red}`@MockBean`을 사용하면 모의 객체가 앱 컨텍스트에 추가된다. `@Mock`은 단순히 모의 객체를 생성할 뿐 빈으로 등록하여 앱 컨텍스트에 들어가지 않는다.=~**★★★
- `@MockBean`을 사용하면 `@Autowired`를 사용할 수 있다.
- `@MockBean`은 원래 스프링 부트에서 사용할 수 있지만 `@ExtendsWith(SpringExtension.class)`를 등록하면 Spring에서도 사용할 수 있다.


## 테스트를 하는 가장 좋은 방법
- 단위 테스트로 앱 구성 요소 로직을 검증
- 통합 테스트로 프레임워크와 어떻게 통합되는지 확인


